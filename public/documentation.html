<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation</title>
  <base href="/public/">
  <!-- <link rel="stylesheet" type="text/css" href="../css/styles.css"> -->
  <style>
    body {
  box-sizing: border-box;
  margin: 20px;
  font-family: 'Courier New', Courier, monospace;
}

h1, h2 {
  font-family: monospace;
  color: #333;
  margin-top: 2em;
}

ol, li {
  width: 80%;
  background-color: lightgray;
  padding: 0.1em;
  margin: 0.8em;
  margin-bottom: 0;
}
li {
  font-weight: bold;
}
pre {
  background-color: white;
  padding: 0.4em;
  font-weight: 300;
  margin: 0.8em;
}

div {
  width: 80%;
}
table {
  font-family: 'Courier New', Courier, monospace;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid darkgrey;
  text-align: left;
  vertical-align: top;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}

td:nth-child(6) {
  max-width: 500px;
}
td:nth-child(5) {
  max-width: 250px;
  overflow: auto;
}
td:nth-child(5) pre {
  max-width: 250px;
  overflow: auto;
}

td:nth-child(6) pre {
  width: 400px;
  overflow: auto;
}



  </style>
</head>
<body>
  <h1>Documentation</h1>
  <h1>Documentation for the movie app - MoveFlix - API</h2>
  <p>Welcome to the documentation for the RESTful API for movie data and user.</p>
  <p>This API is build using Node.js, MongoDB and Mongoose, Express, Passport, JWT, bcrypt and other techonologies
    to provide a platform for accessing and manipulating movie and user information. </p>
  <p>For further information, go to my GitHub Repo:  <a href="https://github.com/manjou/movie_api">https://github.com/manjou/movie_api</a>
  </p>
  <h2>Using the API</h2>
  <p>MoveFlix is accessible online at <a href="https://myflix-api-qeb7.onrender.com/">https://myflix-api-qeb7.onrender.com/</a>. You can make requests directly to this URL to interact with the API.</p>
  <p>Or you can clone the repo and using it locally. You can follow the installation instructions and make modifications and run tests as needed.</p>
  <p>Please note that this REST API is part of my Fullstack Development journey at CareerFoundry, representing my Achievement 2. As I continue to learn and progress, the next milestone involves building the frontend for the MoveFlix Web App using React. Kindly be aware that, as a learner, there might be occasional bugs, and your understanding is appreciated.</p>
  <h2>Installation</h2>
  <ol>
    <li>Clone the Repository
      <div></div>
      <div><pre>git clone https://github.com/manjou/movie_api.git</pre></div>
    </li>
    <li>Navigate to your Project Directory
      <div></div>
      <div><pre>cd movie_api</pre></div>
    </li>
    <li>Install Dependencies
      <div></div>
      <div><pre>npm install</pre></div>
      <p>This command will read the `package.json`file and install all the necessary dependencies in the `node_modules`directory.</p>
    </li>
    <li>Run the application
      <div></div>
      <div><pre>npm start</pre></div>
      <p>This command will start the Node.js server on port 8080.</p>
    </li>
  </ol>
  <h2>Movie API - Endpoints</h2>
  <table>
    <tr>
      <th>Business logic</th>
      <th>URL</th>
      <th>HTTP Method</th>
      <th>query parameters in the URL /
      <br>Requested additional information</th>
      <th>Request Body - data format </th>
      <th>Response Body - data format</th>
    </tr>
    <tr>
      <td>Return a list of ALL movies</td>
      <td>https://myflix-api-qeb7.onrender.com/movies/</td>
      <td>GET</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>None</em></p> 
        <br><strong>Required additional information:</strong>      
        <br><em>The token created at login is required in the header of the request.</em>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format</strong>
        <p>A JSON object holding data about all the movies.</p>
        <p>
          <pre>
            [
            {
                "Genre": {
                    "Name": "Historical Drama",
                    "Description": "Historical drama films are set in the past and focus on historical events, figures, and periods."
                },
                "Director": {
                    "Name": "Steven Spielberg",
                    "Bio": "Steven Spielberg is an American film director, producer, and screenwriter.",
                    "Birth": "1946"
                },
                "_id": "65538c1440e0bd4ea749cc21",
                "Title": "Schindler's List",
                "Description": "Schindler's List is a 1993 American epic historical drama film directed by Steven Spielberg.",
                "ImagePath": "https://www.imdb.com/title/tt0108052/mediaviewer/rm3260118016?ref_=ttm...",
                "Featured": true,
                "Release": "1994",
                "Actors": [
                    "Liam Neeson",
                    "Ben Kingsley"
                ]
            },
            {
                "Genre": {
                    "Name": "Romance",
                    "Description": "Romance films are love stories that focus on passion, emotion, and the affectionate romantic involvement of the main characters."
                },
                "Director": {
                    "Name": "James Cameron",
                    "Bio": "James Cameron is a Canadian film director, producer, and screenwriter.",
                    "Birth": "1954"
                },
                "_id": "65538c1440e0bd4ea749cc22",
                "Title": "Titanic",
                "Description": "Titanic is a 1997 American epic romance and disaster film directed by James Cameron.",
                "ImagePath": "https://www.imdb.com/title/tt0120338/mediaviewer/rm1234567890?ref_=ttm_ql_pv_1",
                "Featured": false,
                "Release": "1997",
                "Actors": [
                    "Leonardo DiCaprio",
                    "Kate Winslet"
                ]
            },
            {
                "Genre": {
                    "Name": "Animation",
                    "Description": "Animation films involve the rapid display of a sequence of images to create an illusion of movement."
                },
                "Director": {
                    "Name": "Hayao Miyazaki",
                    "Bio": "Hayao Miyazaki is a Japanese animator, filmmaker, screenwriter, author, and co-founder of Studio Ghibli.",
                    "Birth": "1941"
                },
                "_id": "65538c1440e0bd4ea749cc23",
                "Title": "Spirited Away",
                "Description": "Spirited Away is a 2001 Japanese animated fantasy film written and directed by Hayao Miyazaki.",
                "ImagePath": "https://www.imdb.com/title/tt0245429/mediaviewer/rm1234567890?ref_=ttm_ql_pv_1",
                "Featured": true,
                "Release": "2001",
                "Actors": [
                    "Rumi Hiiragi",
                    "Miyu Irino"
                ]
            },
          </pre>
        </p>
      </td>
    </tr>
    <tr>
      <td>Get Movie by title</td>
      <td>https://myflix-api-qeb7.onrender.com/movies/</td>
      <td>GET</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:Movie Title]
        <br>Example: <span>"Spirited%20Away"</span>
        <p>Replace empty space with %20!</p></em></p> 
        <br><strong>Required additional information:</strong>      
        <p>The token created at login is required in the header of the request.</p>
        </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format</strong>
        <p>A JSON object holding data about a single movie. Example:</p>
        <p>
          <pre>
            {
              "Genre": {
                  "Name": "Animation",
                  "Description": "Animation films involve the rapid display of a sequence of images to create an illusion of movement."
              },
              "Director": {
                  "Name": "Hayao Miyazaki",
                  "Bio": "Hayao Miyazaki is a Japanese animator, filmmaker, screenwriter, author, and co-founder of Studio Ghibli.",
                  "Birth": "1941"
              },
              "_id": "65538c1440e0bd4ea749cc23",
              "Title": "Spirited Away",
              "Description": "Spirited Away is a 2001 Japanese animated fantasy film written and directed by Hayao Miyazaki.",
              "ImagePath": "https://www.imdb.com/title/tt0245429/mediaviewer/rm1234567890?ref_=ttm_ql_pv_1",
              "Featured": true,
              "Release": "2001",
              "Actors": [
                  "Rumi Hiiragi",
                  "Miyu Irino"
              ]
          }
          </pre>
        </p>
      </td>
    </tr>
    <tr>
      <td>Return movies with a genre (description) by Genre.Name (e.g., "Thriller, Animation")</td>
      <td>https://myflix-api-qeb7.onrender.com/movies/genre/</td>
      <td>GET</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:Genre Name]
        <br>Example: <span>"Animation"</span></em></p> 
        <br><strong>Required additional information:</strong>      
        <p>The token created at login is required in the header of the request.</p>
        </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format</strong>
        <p>A JSON object holding data of all movies with a certain genre.</p>
        <p>
          <pre>
            [
    {
        "Genre": {
            "Name": "Animation",
            "Description": "Animation films involve the rapid display of a sequence of images to create an illusion of movement."
        },
        "Director": {
            "Name": "Hayao Miyazaki",
            "Bio": "Hayao Miyazaki is a Japanese animator, filmmaker, screenwriter, author, and co-founder of Studio Ghibli.",
            "Birth": "1941"
        },
        "_id": "65538c1440e0bd4ea749cc23",
        "Title": "Spirited Away",
        "Description": "Spirited Away is a 2001 Japanese animated fantasy film written and directed by Hayao Miyazaki.",
        "ImagePath": "https://www.imdb.com/title/tt0245429/mediaviewer/rm1234567890?ref_=ttm_ql_pv_1",
        "Featured": true,
        "Release": "2001",
        "Actors": [
            "Rumi Hiiragi",
            "Miyu Irino"
        ]
    },
    {
        "Genre": {
            "Name": "Animation",
            "Description": "Animation films involve the rapid display of a sequence of images to create an illusion of movement."
        },
        "Director": {
            "Name": "Hayao Miyazaki",
            "Bio": "Hayao Miyazaki is a Japanese animator, filmmaker, screenwriter, author, and co-founder of Studio Ghibli.",
            "Birth": "1941"
        },
        "_id": "65538c1440e0bd4ea749cc2b",
        "Title": "Ponyo",
        "Description": "Ponyo is a 2008 Japanese animated fantasy film written and directed by Hayao Miyazaki.",
        "ImagePath": "https://www.imdb.com/title/tt0876563/mediaviewer/rm1234567890?ref_=ttm_ql_pv_1",
        "Featured": true,
        "Release": "2008",
        "Actors": [
            "Tomoko Yamaguchi",
            "Kazushige Nagashima"
        ]
    }
]
          </pre>
        </p>
      </td>
    </tr>
    <tr>
      <td>Return data about a director (bio, birth year, death year) by name;</td>
      <td>https://myflix-api-qeb7.onrender.com/movies/directors/</td>
      <td>GET</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:Director.Name]
        <br>Example: <span>"Hayao%20Miyazaki"</span></em></p> 
        <br><strong>Required additional information:</strong>      
        <p>The token created at login is required in the header of the request.</p>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format</strong>
        <p>A JSON object holding data about the director including bio, birth year and death year:</p>
        <p>
          <pre>
            {
              "Name": "Hayao Miyazaki",
              "Bio": "Hayao Miyazaki is a Japanese animator, filmmaker, and 
              manga artist. He co-founded Studio Ghibli, a film and animation 
              studio, and has attained international acclaim as a masterful 
              storyteller and creator of Japanese animated feature films. 
              Miyazaki has been described as combining elements of Walt Disney, 
              Steven Spielberg, and Orson Welles. He has won numerous awards, 
              including an Honorary Academy Award for his impact on animation 
              and cinema. Miyazaki's films often incorporate themes of anti-war, 
              environmentalism, and self-discovery",
              "Year": "1941"
            }
          </pre>
        </p>
      </td>
    </tr>
    <tr>
      <td>Add a new user</td>
      <td>https://myflix-api-qeb7.onrender.com/users</td>
      <td>POST</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>None</em></p> 
        <br><strong>Required additional information:</strong>      
        <br><em>The token created at login is required in the header of the request.</em>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>A JSON object holding data about the user to be added, structured like this:</em></p>
        <p>
          <pre>
            {
              "Username": "Mary Jane",
              "Password": "sdfDIEdcflkdieEI3",
              "Email": "mary_jane@garden.com",
              "BirthDay": "1990-03-05",
              "FavoriteMovies": []
            }
          </pre>
        </p>
      </td>
      <td>
        <strong>Response Body - data format</strong>
        <p>A JSON object holding data about the user that was added, including an ID, uniquely created by uuid.</p>
        <br>The password is hashed using bcrypt.
        <p>Example:</p>
        <pre>
          {
            "Username": "Mary Jane",
            "Email": "mary_jane@garden.com",
            "Password": "sdfDIEdcflkdieEI3",
            "BirthDay": "1990-03-05",
            "FavoriteMovies": [],
            "_id": "6557563aff1e9fb6bcfe536c",
            "__v": 0
        }
        </pre>
      </td>
    </tr>
    <tr>
      <td>Login User</td>
      <td>https://myflix-api-qeb7.onrender.com/login</td>
      <td>POST</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:Username&Password]</em></p> 
        <p>Example: 
          <br>"?Username=Testuser4&Password=Test1234"</p>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format</strong>
        <p>A JSON object holding the updated data of the user. Example:</p>
        <pre>
          {
            "user": {
                "_id": "655ded72a984b2250e72b4b1",
                "Username": "Testuser4",
                "Email": "testuser4@user4.com",
                "Password": "$2b$10$aBjDo7.XTrZWLruqjf6SneUuvKtAl1XOxrlobWIxGnP6VH2ztqU4.",
                "FavoriteMovies": [],
                "__v": 0
            },
            "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTVkZWQ3MmE5ODRiMjI1MGU3MmI0YjEiLCJVc2VybmFtZSI6IlRlc3R1c2VyNCIsIkVtYWlsIjoidGVzdHVzZXI0QHVzZXI0LmNvbSIsIlBhc3N3b3JkIjoiJDJiJDEwJGFCakRvNy5YVHJaV0xydXFqZjZTbmVVdXZLdEFsMVhPeHJsb2JXSXhHblA2VkgyenRxVTQuIiwiRmF2b3JpdGVNb3ZpZXMiOltdLCJfX3YiOjAsImlhdCI6MTcwMDY2MjkwNiwiZXhwIjoxNzAxMjY3NzA2LCJzdWIiOiJUZXN0dXNlcjQifQ.Z9lOJBdnAbQZ-__SHaB8q4B9EsnM15oMPKBRNxTraxE"
        }
        </pre>
      </td>
    </tr>
    <tr>
      <td>Update user info (id)</td>
      <td>https://myflix-api-qeb7.onrender.com/users/</td>
      <td>PUT</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:id]</em></p> 
        <p>Example: 
          <br>"655ded72a984b2250e72b4b1"</p>
        <br><strong>Required additional information:</strong>      
        <br><em>The token created at login is required in the header of the request.</em>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>A JSON object holding data about the updated name of the user. Expected data is Username, Password, Example:</em></p>
        <pre>
          {
            "Username": "Testuser4",
            "Password": "Test1234",
            "Email": "testuserNew@user4.com"
          }
        </pre>
      </td>
      <td>
        <strong>Response Body - data format</strong>
        <p>A JSON object holding the updated data of the user. Example:</p>
        <pre>
          {
            "_id": "655ded72a984b2250e72b4b1",
            "Username": "Testuser4",
            "Email": "testuserNew@user4.com",
            "Password": "$2b$10$Q3J40Jr1qSYIfnNR4Z5Vn.H8Geoj3QwJC7brC2zeh8.EPjtKoLthm",
            "FavoriteMovies": [],
            "__v": 0
        }
        </pre>
      </td>
    </tr>
    <tr>
      <td>Add a favorite movie to favoriteMovies of the user.</td>
      <td>https://myflix-api-qeb7.onrender.com/users/</td>
      <td>POST</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:Username/movies/:movieId]</em></p> 
        <p>Example: 
          <br>"Testuser4/movies/65538c1440e0bd4ea749cc2d"</p>
        <br><strong>Required additional information:</strong>      
        <br><em>The token created at login is required in the header of the request.</em>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format </strong>
        <p>A JSON object holding the data of the user including id, name and favoriteMovies. 
          Example:</p>
        <pre>
          {
            "_id": "655ded72a984b2250e72b4b1",
            "Username": "Testuser4",
            "Email": "testuserNew@user4.com",
            "Password": "$2b$10$Q3J40Jr1qSYIfnNR4Z5Vn.H8Geoj3QwJC7brC2zeh8.EPjtKoLthm",
            "FavoriteMovies": [
                "65538c1440e0bd4ea749cc2d"
            ],
            "__v": 0
        }
        </pre>
      </td>
    </tr>
    <tr>
      <td>Remove a movie from the favoriteMovies list of user.</td>
      <td>https://myflix-api-qeb7.onrender.com/users/</td>
      <td>DELETE</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:ID/movies/:MovieID]</em></p> 
        <p>Example: 
          <br>"655ded72a984b2250e72b4b1/movies/65538c1440e0bd4ea749cc25"</p>
        <br><strong>Required additional information:</strong>      
        <br><em>The token created at login is required in the header of the request.</em>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format </strong>
        <pre>
        {
        "_id": "655ded72a984b2250e72b4b1",
        "Username": "Testuser4",
        "Email": "testuserNew@user4.com",
        "Password": "$2b$10$Q3J40Jr1qSYIfnNR4Z5Vn.H8Geoj3QwJC7brC2zeh8.EPjtKoLthm",
        "FavoriteMovies": [
            "65538c1440e0bd4ea749cc2d"
        ],
        "__v": 0
        }
        </pre>
      </td>
      </tr>
      <tr>
      <td>Removing a user</td>
      <td>https://myflix-api-qeb7.onrender.com/users/</td>
      <td>DELETE</td>
      <td>
        <strong>query parameters in the URL:</strong>
        <p><em>[:ID]</em></p> 
        <p>Example: 
          <br>"655ded72a984b2250e72b4b1</p>
        <br><strong>Required additional information:</strong>      
        <br><em>The token created at login is required in the header of the request.</em>
      </td>
      <td>
        <strong>Request Body - data format </strong>
        <p><em>None</em></p>
      </td>
      <td>
        <strong>Response Body - data format </strong>
        <p>A Text message indicating wich user was removed from the user list.</p>
      </td>
    </tr>
  </table>
</body>
</html>